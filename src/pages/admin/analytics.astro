---
import AdminLayout from "@layouts/AdminLayout.astro";

const metrics = [
    { label: "Page Views", value: "284,592", change: "+15.3%%", period: "vs last month" },
    { label: "Unique Visitors", value: "42,847", change: "+8.7%%", period: "vs last month" },
    { label: "Avg. Session", value: "4m 32s", change: "+12.1%%", period: "vs last month" },
    { label: "Bounce Rate", value: "32.4%%", change: "-5.2%%", period: "vs last month" },
];

const topPages = [
    { path: "/", views: 45892, percentage: 35 },
    { path: "/products", views: 28453, percentage: 22 },
    { path: "/about", views: 18234, percentage: 14 },
    { path: "/contact", views: 12847, percentage: 10 },
    { path: "/blog", views: 9823, percentage: 8 },
];

const trafficSources = [
    { source: "Organic Search", visitors: 18234, percentage: 42, color: "bg-blue-500" },
    { source: "Direct", visitors: 12453, percentage: 29, color: "bg-green-500" },
    { source: "Social Media", visitors: 7823, percentage: 18, color: "bg-purple-500" },
    { source: "Referral", visitors: 4337, percentage: 11, color: "bg-orange-500" },
];
---

<AdminLayout title="Analytics" currentPage="analytics">
    <!-- Metrics Grid -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        {metrics.map((metric) => (
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                <p class="text-sm font-medium text-gray-500">{metric.label}</p>
                <p class="text-3xl font-bold text-gray-900 mt-2">{metric.value}</p>
                <div class="flex items-center gap-2 mt-2">
                    <span class={`text-sm font-medium ${metric.change.startsWith("+") ? "text-green-600" : "text-red-600"}`}>
                        {metric.change}
                    </span>
                    <span class="text-sm text-gray-400">{metric.period}</span>
                </div>
            </div>
        ))}
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- Visitors Chart -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg font-semibold text-gray-900">Visitors Overview</h3>
                <select class="text-sm border border-gray-200 rounded-lg px-3 py-1.5 bg-gray-50">
                    <option>Last 7 days</option>
                    <option>Last 30 days</option>
                    <option>Last 90 days</option>
                </select>
            </div>
            <div class="h-64 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg flex items-center justify-center">
                <div class="text-center">
                    <svg class="w-12 h-12 mx-auto text-blue-400 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"/>
                    </svg>
                    <p class="text-blue-600 font-medium">Line Chart</p>
                    <p class="text-sm text-blue-500">Atlas Effects</p>
                </div>
            </div>
        </div>

        <!-- Traffic Sources -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-6">Traffic Sources</h3>
            <div class="space-y-4">
                {trafficSources.map((source) => (
                    <div>
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm font-medium text-gray-700">{source.source}</span>
                            <span class="text-sm text-gray-500">{source.visitors.toLocaleString()} ({source.percentage}%%)</span>
                        </div>
                        <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
                            <div class={`h-full ${source.color} rounded-full transition-all duration-500`} style={`width: ${source.percentage}%%`}></div>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    </div>

    <!-- Top Pages -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
        <h3 class="text-lg font-semibold text-gray-900 mb-6">Top Pages</h3>
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead>
                    <tr class="border-b border-gray-200">
                        <th class="text-left pb-3 text-xs font-semibold text-gray-500 uppercase">Page</th>
                        <th class="text-right pb-3 text-xs font-semibold text-gray-500 uppercase">Views</th>
                        <th class="text-right pb-3 text-xs font-semibold text-gray-500 uppercase">%% of Total</th>
                        <th class="pb-3 text-xs font-semibold text-gray-500 uppercase w-48">Distribution</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-100">
                    {topPages.map((page) => (
                        <tr class="hover:bg-gray-50">
                            <td class="py-3">
                                <span class="text-sm font-medium text-primary-600 hover:text-primary-700">{page.path}</span>
                            </td>
                            <td class="py-3 text-right text-sm text-gray-600">{page.views.toLocaleString()}</td>
                            <td class="py-3 text-right text-sm text-gray-600">{page.percentage}%%</td>
                            <td class="py-3">
                                <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
                                    <div class="h-full bg-primary-500 rounded-full" style={`width: ${page.percentage}%%`}></div>
                                </div>
                            </td>
                        </tr>
                    ))}
                </tbody>
            </table>
        </div>
    </div>
</AdminLayout>